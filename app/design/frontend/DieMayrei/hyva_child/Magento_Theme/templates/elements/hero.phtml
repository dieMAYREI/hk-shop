<?php

/**
 * Hyvä Themes - https://hyva.io
 * Copyright © Hyvä Themes. All rights reserved.
 * See COPYING.txt for license details.
 */

declare(strict_types=1);

use DieMayrei\CategoryHero\Block\HeroList;
use Magento\Framework\Escaper;

/** @var Escaper $escaper */
/** @var HeroList $block */

/** @var array<array<string, string>> $heroes */
$heroes = $block->getHeroItems();

if (!$heroes) {
    return;
}

$count = count($heroes);
$gridClass = match (true) {
    $count >= 4 => 'grid-cols-1 sm:grid-cols-2 xl:grid-cols-4',
    $count === 3 => 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',
    default => 'grid-cols-1 md:grid-cols-2',
};
?>

<section class="mb-24 lg:mt-6 grid gap-8 <?= $escaper->escapeHtmlAttr($gridClass) ?>" aria-labelledby="category-hero">
    <?php foreach ($heroes as $hero): ?>
        <div class="card card-interactive overflow-hidden p-0 hover:transform-scale-101">
            <a href="<?= $escaper->escapeUrl($hero['link']) ?>" class="block group">
                <img
                    src="<?= $escaper->escapeUrl($hero['image']) ?>"
                    alt="<?= $escaper->escapeHtmlAttr($hero['alt']) ?>"
                    class="w-full h-auto"
                    loading="lazy"
                >
            </a>
        </div>
    <?php endforeach; ?>
</section>
